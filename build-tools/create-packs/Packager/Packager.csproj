<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>netstandard2.1</TargetFramework>
  </PropertyGroup>

  <Import Project="..\..\..\Configuration.props" />
  <Import Project="..\..\installers\create-installers.targets" />

  <PropertyGroup>
    <IncludeBuildOutput>false</IncludeBuildOutput>
    <PackageId>Xamarin.Android.Sdk</PackageId>
    <PackageVersion>0.0.1</PackageVersion>
    <Authors>Xamarin</Authors>
    <Description>C# Tools and Bindings for the Android SDK</Description>
    <RootPacksDirectory>$(XamarinAndroidSourcePath)\bin\Build$(Configuration)\packs</RootPacksDirectory>
    <XASdkPackRoot>$(RootPacksDirectory)\Xamarin.Android.Sdk</XASdkPackRoot>
    <BeforePack>CopyXamarinAndroidSdkPackContent</BeforePack>
  </PropertyGroup>

  <Target Name="CopyXamarinAndroidSdkPackContent" 
      DependsOnTargets="ConstructInstallerItems"
      Inputs="@(FrameworkItemsWin);@(FrameworkItemsUnix);@(MSBuildItemsWin);@(MSBuildItemsUnix)" 
      Outputs="@(FrameworkItemsWin->'$(XASdkPackRoot)\ref\%(RelativePath)');@(FrameworkItemsUnix->'$(XASdkPackRoot)\ref\%(RelativePath)');@(MSBuildItemsWin->'$(XASdkPackRoot)\tools\%(RelativePath)');@(MSBuildItemsUnix->'$(XASdkPackRoot)\tools\%(RelativePath)')" >
    <Copy
      SourceFiles="@(FrameworkItemsWin)"
      DestinationFiles="@(FrameworkItemsWin->'$(XASdkPackRoot)\ref\%(RelativePath)')"
    />
    <Copy
      SourceFiles="@(FrameworkItemsUnix)"
      DestinationFiles="@(FrameworkItemsUnix->'$(XASdkPackRoot)\ref\%(RelativePath)')"
    />
    <Copy
      SourceFiles="@(MSBuildItemsWin)"
      DestinationFiles="@(MSBuildItemsWin->'$(XASdkPackRoot)\tools\%(RelativePath)')"
    />
    <Copy
      SourceFiles="@(MSBuildItemsUnix)"
      DestinationFiles="@(MSBuildItemsUnix->'$(XASdkPackRoot)\tools\%(RelativePath)')"
    />

    <ItemGroup>
      <Content Include="$(XamarinAndroidSourcePath)\src\Xamarin.Android.Sdk\**" >
        <Pack>true</Pack>
        <PackagePath>\</PackagePath>
      </Content>
      <Content Include="$(XASdkPackRoot)\**" >
        <Pack>true</Pack>
        <PackagePath>\</PackagePath>
      </Content>
    </ItemGroup>

  </Target>

</Project>
