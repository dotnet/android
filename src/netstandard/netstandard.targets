<Project DefaultTargets="Build" ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="_BuildNetstandardFacade">
   <MSBuild Projects="..\Mono.Android\Mono.Android.csproj"
             Targets="GetTargetPath"
             Properties="Configuration=$(Configuration)">
        <Output TaskParameter="TargetOutputs"
                ItemName="MonoAndroidAssembly" />
    </MSBuild>
    <Exec
        Command="make -C $(MonoSourceFullPath)\mcs\class\Facades\netstandard PROFILE=monodroid EXTRA_LIB_MCS_FLAGS=&quot;-r:%(MonoAndroidAssembly.Identity)&quot;"
        WorkingDirectory="$(MonoSourceFullPath)"
    />
    <Copy
        SourceFiles="$(MonoSourceFullPath)\mcs\class\lib\monodroid\Facades\netstandard.dll"
        DestinationFiles="$(OutputPath)\netstandard.dll"
    />
  </Target>
  <Target Name="_CleanNetstandardFacade"
      AfterTargets="Clean">
    <Delete Files="$(OutputPath)\netstandard.dll" />
    <Exec
        Command="make -C $(MonoSourceFullPath)\mcs\class\Facades\netstandard PROFILE=monodroid clean"
        WorkingDirectory="$(MonoSourceFullPath)"
    />
  </Target>
</Project>

